/*
Template Name: Color Admin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.7
Version: 2.1.0
Author: Sean Ngu
Website: http://www.seantheme.com/color-admin-v2.1/frontend/e-commerce/
*/
function getUrlParam(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
            var r = window.location.search.substr(1).match(reg);  //匹配目标参数
            if (r != null) return decodeURI(r[2]); return null; //返回参数值
        }

var handleHeaderFixedTop = function() {
		0 !== $('#header[data-fixed-top="true"]').length && $(window).on("scroll", function() {
			$("body").scrollTop() >= 40 ? ($("body").css("padding-top", "76px"), $("#header").addClass("header-fixed")) : ($("#header").removeClass("header-fixed"), $("body").css("padding-top", "0"))
		})
	},
	// handlePageContainerShow = function() {
	// 	$("#page-container").addClass("in")
	// },
	// handlePaceLoadingPlugins = function() {
	// 	Pace.on("hide", function() {
	// 		setTimeout(function() {
	// 			$(".pace").addClass("hide")
	// 		}, 500)
	// 	})
	// },
	// handleTooltipActivation = function() {
	// 	0 !== $("[data-toggle=tooltip]").length && $("[data-toggle=tooltip]").tooltip()
	// },
	// handleThemePanelExpand = function() {
	// 	$('[data-click="theme-panel-expand"]').on("click", function() {
	// 		var e = ".theme-panel",
	// 			t = "active";
	// 		$(e).hasClass(t) ? $(e).removeClass(t) : $(e).addClass(t)
	// 	})
	// },
	// handleThemePageControl = function() {
	// 	if ($.cookie && $.cookie("theme")) {
	// 		0 !== $(".theme-list").length && ($(".theme-list [data-theme]").closest("li").removeClass("active"), $('.theme-list [data-theme="' + $.cookie("theme") + '"]').closest("li").addClass("active"));
	// 		var e = "css/theme/" + $.cookie("theme") + ".css";
	// 		$("#theme").attr("href", e)
	// 	}
	// 	$(".theme-list [data-theme]").on("click", function() {
	// 		var e = "css/theme/" + $(this).attr("data-theme") + ".css";
	// 		$("#theme").attr("href", e), $(".theme-list [data-theme]").not(this).closest("li").removeClass("active"), $(this).closest("li").addClass("active"), $.cookie("theme", $(this).attr("data-theme"))
	// 	})
	// },
	// handlePaymentTypeSelection = function() {
	// 	$('[data-click="set-payment"]').click(function(e) {
	// 		e.preventDefault();
	// 		var t = $(this).closest("li"),
	// 			a = $(this).attr("data-value");
	// 		$('[data-click="set-payment"]').closest("li").not(t).removeClass("active"), $('[data-id="payment-type"]').val(a), $(t).addClass("active")
	// 	})
	// },
	// handleQtyControl = function() {
	// 	$('[data-click="increase-qty"]').click(function(e) {
	// 		e.preventDefault();
	// 		var t = $(this).attr("data-target"),
	// 			a = parseInt($(t).val()) + 1;
	// 		$(t).val(a)
	// 	}), $('[data-click="decrease-qty"]').click(function(e) {
	// 		e.preventDefault();
	// 		var t = $(this).attr("data-target"),
	// 			a = parseInt($(t).val()) - 1;
	// 		a = 0 > a ? 0 : a, $(t).val(a)
	// 	})
	// },
	handleProductImage = function() {
		$('[data-click="show-main-image"]').click(function(e) {
			e.preventDefault();
			var t = '[data-id="main-image"]',
				a = '<img src="' + $(this).attr("data-url") + '" />',
				i = $(this).closest("li");
			$(t).html(a), $(i).addClass("active"), $('[data-click="show-main-image"]').closest("li").not(i).removeClass("active")
		})
	},
	handleNavBar = function(){
		$('[data-toggle="tab"]').click(function(e){
			e.preventDefault();
			var a = $(this).attr("href");
			b = $('#product-tab>.active>a').attr("href");
			i = $(this).closest('li');
			if(a!=b){
				$(i).addClass("active");
				$('[data-toggle="tab"]').closest("li").not(i).removeClass("active");
				$(a).attr('class','tab-pane fade active in');
				$(b).attr('class',"tab-pane fade");
			}
		})
	}
	insertNav = function(cata){
		$.getJSON("data/ac_power.json", "", function(data) {
			for (var i = data.length - 1; i >= 0; i--) {
       			//console.log(data[i]);
				if(data[i].id === cata)
				{
					var name = data[i].name;
					console.log(name);
					var a = $('.breadcrumb');
					console.log(a);
					var str = '<li>ac_power</a></li>'
					a.append(str);
					var str1 = '<li class="active">'+name+'</li>';
					a.append(str1);
					/*$.each(lines,function(i,item){
						var a = $('#product-desc');
						var str = '<div class="product-desc">\
                          <div class="image1">\
                              <img src="data/'+item+'" alt="" style="width: 100%" />\
                          </div></div>';
                        a.append(str);
					})*/
				}
			}
		});
	}
  insertTurnImgs = function(cata) {
		$.getJSON("data/data.json", "", function(data) {
    　  //each循环 使用$.each方法遍历返回的数据date
       /*$.each(data.first, function(i, item) {
            var str = '<div>姓名:' + item.name + '性别：' + item.sex + '</div>';
            document.write(str);
       })*/
       		console.log(data);
       		for (var i = data.length - 1; i >= 0; i--) {
       			//console.log(data[i]);
				if(data[i].id === cata)
				{
					var imgs = [];
					var name = data[i].name + "_imgs";
					imgs = data[i][name];
					console.log(imgs);

					if(imgs.length>0){
						var a = $('.breadcrumb');
						var str = '<ul class="pgwSlideshow"></ul>';
						a.after(str);
						var b = $('.pgwSlideshow');
						$.each(imgs,function(i,item){
							var str = '<li><img src="data'+item+'" alt="" data-description=""></li>';
							b.append(str);
						})
						$('.pgwSlideshow').pgwSlideshow();
				}
			}
		}
	});
	}
	insertLineImgs = function(cata){
		$.getJSON("data/ac_power.json", "", function(data) {
			for (var i = data.length - 1; i >= 0; i--) {
       			//console.log(data[i]);
				if(data[i].id === cata)
				{
					var lines = [];
					lines = data[i].line;
					console.log(lines);
					$.each(lines,function(i,item){
						var a = $('#product-desc');
						var str = '<div class="product-desc">\
                          <div class="image1">\
                              <img src="data/'+item+'" alt="" style="width: 100%" />\
                          </div></div>';
                        a.append(str);
					})
				}
			}
		});
	}
	insertContent = function(cata){
		$.getJSON("data/ac_power.json", "", function(data) {
			for (var i = data.length - 1; i >= 0; i--) {
       			//console.log(data[i]);
				if(data[i].id === cata)
				{
					var content = [];
					content = data[i].products;
					console.log(content[0]);
					if(content[0].imgurl!=""){
					$.each(content,function(i,item){
						var imgurl = "data/" + item.imgurl;
						var a = $('#product-desc');
						var details = item.description;
						if(i%2===0){
							//console.log(details);
							var str = '<div class="product-desc">\
							<div class="image"><img src="'+imgurl+'" alt="" />\
                          </div><div class="desc"><h3>Corresponding line specifications</h3><ul class="product-info-list1" id="'+i+'">\
							</ul></div></div>'
							a.append(str);
							var id = "#" + i;
							console.log(id)
							var b = $(id);
							$.each(details,function(i,item){
								var str2 = '<li><i class="fa fa-circle">'+' '+item+'</i></li>';
								b.append(str2)
							})
						}
						if(i%2===1){
							//console.log(details);
							var str = '<div class="product-desc right">\
							<div class="image"><img src="'+imgurl+'" alt="" />\
                          </div><div class="desc"><h3>Corresponding line specifications</h3><ul class="product-info-list2" id="'+i+'">\
							</ul></div></div>'
							a.append(str);
							var id = "#" + i;
							//console.log(id);
							var b = $(id);
							$.each(details,function(i,item){
								var str2 = '<li><i class="fa fa-circle">'+' '+item+'</i></li>';
								b.append(str2)
							})
						}
					})
				}
				}
		}
	});
	}
	productTurnImgs = function(cata,pname) {
		$.getJSON("data/"+pname+".json", "", function(data) {
       		console.log(data);
       		for (var i = data.length - 1; i >= 0; i--) {
       			//console.log(data[i]);
				if(data[i].id === cata)
				{
					var imgs = data[i].imgurl;

					console.log(imgs);

					if(imgs.length>0){
						var a = $('.breadcrumb');
						var str = '<ul class="pgwSlideshow"></ul>';
						a.after(str);
						var b = $('.pgwSlideshow');
						$.each(imgs,function(i,item){
							var str = '<li><img src="data'+item+'" alt="" data-description=""></li>';
							b.append(str);
						})
						$('.pgwSlideshow').pgwSlideshow();
					}
				}
			}
		});
	}
	productContent = function(cata,pname){
		$.getJSON("data/"+pname+".json", "", function(data) {
       		console.log(data);
       		for (var i = data.length - 1; i >= 0; i--) {
       			//console.log(data[i]);
				if(data[i].id === cata)
				{
					var imgs = data[i].parameter;

					console.log(imgs);

					if(imgs[0]!=""){
						$.each(imgs,function(i,item){
						var a = $('#product-desc');
						var str = '<div class="product-desc">\
                          <div class="image1">\
                              <img src="data'+item+'" alt="" style="width: 100%" />\
                          </div></div>';
                        a.append(str);
						})
					}
				}
			}
		});
	}
	productNav = function(cata,pname){
		$.getJSON("data/"+pname+".json", "", function(data) {
			for (var i = data.length - 1; i >= 0; i--) {
       			//console.log(data[i]);
				if(data[i].id === cata)
				{
					var name = data[i].name;
					console.log(name);
					var a = $('.breadcrumb');
					console.log(a);
					var str = '<li>'+pname+'</li>'
					a.append(str);
					var str1 = '<li class="active">'+name+'</li>';
					a.append(str1);
					/*$.each(lines,function(i,item){
						var a = $('#product-desc');
						var str = '<div class="product-desc">\
                          <div class="image1">\
                              <img src="data/'+item+'" alt="" style="width: 100%" />\
                          </div></div>';
                        a.append(str);
					})*/
				}
			}
		});
	}

	mobileNav = function(){
		// Mobile Navigation
		  if ($('#nav-menu-container').length) {
		    var $mobile_nav = $('#nav-menu-container').clone().prop({
		      id: 'mobile-nav'
		    });
		    $mobile_nav.find('> ul').attr({
		      'class': '',
		      'id': ''
		    });
		    $('body').append($mobile_nav);
		    $('body').prepend('<button type="button" id="mobile-nav-toggle"><i class="fa fa-bars"></i></button>');
		    $('body').append('<div id="mobile-body-overly"></div>');
		    $('#mobile-nav').find('.menu-has-children').prepend('<i class="fa fa-chevron-down"></i>');

		    $(document).on('click', '.menu-has-children i', function(e) {
		      $(this).next().toggleClass('menu-item-active');
		      $(this).nextAll('ul').eq(0).slideToggle();
		      $(this).toggleClass("fa-chevron-up fa-chevron-down");
		    });

		    $(document).on('click', '#mobile-nav-toggle', function(e) {
		      $('body').toggleClass('mobile-nav-active');
		      $('#mobile-nav-toggle i').toggleClass('fa-times fa-bars');
		      $('#mobile-body-overly').toggle();
		    });

		    $(document).click(function(e) {
		      var container = $("#mobile-nav, #mobile-nav-toggle");
		      if (!container.is(e.target) && container.has(e.target).length === 0) {
		        if ($('body').hasClass('mobile-nav-active')) {
		          $('body').removeClass('mobile-nav-active');
		          $('#mobile-nav-toggle i').toggleClass('fa-times fa-bars');
		          $('#mobile-body-overly').fadeOut();
		        }
		      }
		    });
		  } else if ($("#mobile-nav, #mobile-nav-toggle").length) {
		    $("#mobile-nav, #mobile-nav-toggle").hide();
		  }
	}
	App = function() {
		"use strict";
		return {
			init: function() {
				var type = getUrlParam("type");
				// var type = "01";
				mobileNav(),handleProductImage(),handleNavBar(),insertContent(type),insertLineImgs(type),insertTurnImgs(type),insertNav(type);
			},
			initline: function(){
				// var type = "02", pname = "network_cable";
		        var type = getUrlParam("type");
		        var pname = getUrlParam("pname");
		        console.log(type,pname);
				mobileNav(),handleProductImage(),handleNavBar(),productTurnImgs(type,pname),productContent(type,pname),productNav(type,pname)
			}
		}
	}();
